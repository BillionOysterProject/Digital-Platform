<form name="vm.form.expeditionForm" ng-submit="vm.save(vm.form.expeditionForm.$valid)" novalidate>
    <section class="content shaded">
        <section class="container">
            <div class="page-header">
                <h1>{{vm.expedition._id ? 'Edit expedition' : 'Create an expedition'}}</h1>
            </div>
            <div class="row">
                <!-- vm.expedition.team, I think this will be auto populated an not changable -->
                <!-- vm.expedition.teamMembers, this will be a select2 -->
                <!-- vm.expedition.site, another select2, single select -->
                <!-- vm.expedition.latitude, number field with decimal, might be auto populated -->
                <!-- vm.expedition.longitude, number field with decimal, might be auto populated -->
                <!-- vm.expedition.monitoringDate, is there a date time field we can use?, if not we'll do two and I'll fix it on the back end -->
                <!-- vm.expedition.notes, wysiwyg field -->
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="name">Name your expedition</label>
                        <input type="text" class="form-control" name="name" ng-model="vm.expedition.name"/>
                    </div>
                    <div class="row">
                        <div class="form-group col-sm-6">
                            <label for="team">Select a team</label>
                            <select class="form-control" ng-model="vm.expedition.team._id" ng-change="vm.fieldChanged(team)"
                            name="team" id="team">
                              <option ng-repeat="team in vm.teams" value="{{team._id}}">{{team.name}}</option>
                            </select>
                        </div>
                        <div class="form-group col-sm-6">
                            <label for="station">Select a location</label>
                            <select class="form-control" ng-model="vm.expedition.station._id" name="station" id="station">
                              <option ng-repeat="station in vm.stations" value="{{station._id}}">{{station.name}}</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="row">
                        <div class="form-group">
                            <label for="startTime">Start time</label>
                            <input type="datetime-local" class="form-control" name="startTime"
                            placeholder="yyyy-MM-ddTHH:mm:ss" min="{{vm.dateTime.min}}" max="{{vm.dateTime.max}}"
                            ng-model="vm.expedition.monitoringStartDate"/>
                        </div>
                      </div>
                      <div class="row">
                        <div class="form-group">
                            <label for="endTime">Stop time</label>
                            <input type="datetime-local" class="form-control" name="endTime"
                            placeholder="yyyy-MM-ddTHH:mm:ss" min="{{vm.dateTime.min}}" max="{{vm.dateTime.max}}"
                            ng-model="vm.expedition.monitoringEndDate"/>
                        </div>
                    </div>
                </div>
                <div class="form-group col-md-4">
                    <label for="notes">Special Instructions</label>
                    <textarea class="form-control" rows="5" name="notes" ng-model="vm.expedition.notes"></textarea>
                </div>
        </section>
    </section>
    <section class="content">
        <section class="container">
            <div class="form-group">
                <label>Assign students to protocols</label>
                <button type="submit" class="btn btn-default btn-sm">Auto Assign</button>
            </div>
            <div class="row"><!--TODO: Fix drag and drop functionality. Currently drags but doesn't drop. -->
              <div class="col-md-2" dnd-list="vm.memberLists.lists['Members']"><!-- dnd-disable-if="vm.isInList(item, vm.memberLists.lists['Members'])"-->
                <a ng-repeat="item in vm.memberLists.lists['Members']" class="draggable" dnd-draggable="item"
                 dnd-moved="" dnd-effect-allowed="move"
                 dnd-selected="vm.memberLists.selected = item" ng-class="{'selected': vm.memberLists.selected === item}">
                  <img ng-src="{{item.profileImageURL}}" class="header-profile-image"> {{item.displayName}}</a>
              </div>
              <div class="col-md-10">
                <div class="panel panel-default">
                  <table class="table">
                    <tr>
                      <td><h6>Protocol 1</h6><br /> Site Conditions</td>
                      <td><h6>Protocol 2</h6><br /> Oyster Measurements</td>
                      <td><h6>Protocol 3</h6><br /> Mobile Trap</td>
                      <td><h6>Protocol 4</h6><br /> Settlement Tiles</td>
                      <td><h6>Protocol 5</h6><br /> Water Quality</td>
                    </tr>
                    <tr>
                      <td class="dragdrop">
                        <div class="droppable" dnd-list="vm.memberLists.lists['Site Conditions']"><!--dnd-disable-if="vm.isInList(item, vm.memberLists.lists['Site Conditions'])"-->
                          <a ng-repeat="item in vm.memberLists.lists['Site Conditions']" class="draggable" dnd-draggable="item"
                            dnd-moved="vm.memberLists.lists['Site Conditions'].splice($index,1)" dnd-effect-allowed="move"
                            dnd-selected="vm.memberLists.selected = item" ng-class="{'selected': vm.memberLists.selected === item}">
                            <img ng-src="{{item.profileImageURL}}" class="header-profile-image"> {{item.displayName}}</a>
                        </div>
                      </td>
                      <td class="dragdrop">
                        <div class="droppable" dnd-list="vm.memberLists.lists['Oyster Measurements']"><!-- dnd-disable-if="vm.isInList(item, vm.memberLists.lists['Oyster Measurements'])"-->
                          <a ng-repeat="item in vm.memberLists.lists['Oyster Measurements']" class="draggable" dnd-draggable="item"
                            dnd-moved="vm.memberLists.lists['Oyster Measurements'].splice($index,1)" dnd-effect-allowed="move"
                            dnd-selected="vm.memberLists.selected = item" ng-class="{'selected': vm.memberLists.selected === item}">
                            <img ng-src="{{item.profileImageURL}}" class="header-profile-image"> {{item.displayName}}</a>
                        </div>
                      </td>
                      <td class="dragdrop">
                        <div class="droppable" dnd-list="vm.memberLists.lists['Mobile Trap']"><!-- dnd-disable-if="vm.isInList(item, vm.memberLists.lists['Mobile Trap'])"-->
                          <a ng-repeat="item in vm.memberLists.lists['Mobile Trap']" class="draggable" dnd-draggable="item"
                            dnd-moved="vm.memberLists.lists['Mobile Trap'].splice($index,1)" dnd-effect-allowed="move"
                            dnd-selected="vm.memberLists.selected = item" ng-class="{'selected': vm.memberLists.selected === item}">
                            <img ng-src="{{item.profileImageURL}}" class="header-profile-image"> {{item.displayName}}</a>
                        </div>
                      </td>
                      <td class="dragdrop">
                        <div class="droppable" dnd-list="vm.memberLists.lists['Settlement Tiles']"><!-- dnd-disable-if="vm.isInList(item, vm.memberLists.lists['Settlement Tiles'])"-->
                          <a ng-repeat="item in vm.memberLists.lists['Settlement Tiles']" class="draggable" dnd-draggable="item"
                            dnd-moved="vm.memberLists.lists['Settlement Tiles'].splice($index,1)" dnd-effect-allowed="move"
                            dnd-selected="vm.memberLists.selected = item" ng-class="{'selected': vm.memberLists.selected === item}">
                            <img ng-src="{{item.profileImageURL}}" class="header-profile-image"> {{item.displayName}}</a>
                        </div>
                      </td>
                      <td class="dragdrop">
                        <div class="droppable" dnd-list="vm.memberLists.lists['Water Quality']"><!-- dnd-disable-if="vm.isInList(item, vm.memberLists.lists['Water Quality'])"-->
                          <a ng-repeat="item in vm.memberLists.lists['Water Quality']" class="draggable" dnd-draggable="item"
                            dnd-moved="vm.memberLists.lists['Water Quality'].splice($index,1)" dnd-effect-allowed="move"
                            dnd-selected="vm.memberLists.selected = item" ng-class="{'selected': vm.memberLists.selected === item}">
                            <img ng-src="{{item.profileImageURL}}" class="header-profile-image"> {{item.displayName}}</a>
                        </div>
                      </td>
                    </tr>
                  </table>
                </div>
              </div>
            </div>
        </section>
    </section>
    <section class="content shaded">
        <section class="container">
                <div class="form-group">
                    <button type="submit" class="btn btn-primary">{{vm.expedition._id ? 'Update' : 'Launch'}}</button>
                </div>
                <div ng-show="vm.error" class="text-danger">
                    <strong ng-bind="vm.error"></strong>
                </div>
            </div>
        </section>
    </section>
</form>
