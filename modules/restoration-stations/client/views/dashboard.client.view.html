<section class="content shaded">
    <section class="container-fluid">
        <div class="page-header">
            <div class="row">
                <h2 class="col-md-8">Restoration Stations</h2>
                <div class="col-md-4">
                    <div class="btn-group pull-right">
                      <button type="button" class="btn btn-lg btn-success dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        {{vm.team.name}} <span class="caret"></span><!--If only a member/teacher of 1 team, hide this caret -->
                      </button>
                      <ul class="dropdown-menu" ng-show="vm.teams.length > 1">
                        <li ng-repeat="team in vm.teams"><a href="#" ng-click="vm.fieldChanged(team)">{{team.name}}</a></li>
                      </ul>
                    </div>
                    <h5><img ng-src="{{vm.team.teamLead.profileImageURL}}" class="header-profile-image pull-left"> {{vm.team.teamLead.displayName}}<br />
                      <small class="text-muted">{{vm.team.schoolOrg.city}}, {{vm.team.schoolOrg.state}}</small>
                    </h5>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-8">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4>Oyster Restoration Stations</h4>
                    </div>
                    <div class="panel-body">
                      <leaflet-map map-controls="" map-click-event="" marker-drag-end-event="" can-move-marker="" show-marker=""></leaflet-map>
                    </div>
                </div>
                <div class="row" ng-show="vm.isTeamLead">
                    <div class="col-lg-4">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h4>Team Members <span class="badge badge-success pull-right">{{vm.members.length}}</span></h4>
                            </div>
                            <div class="panel-body">
                                <p ng-repeat="member in vm.members"><img ng-src="{{member.profileImageURL}}" class="header-profile-image"> {{member.displayName}}</p>
                            </div>
                            <div class="panel-footer">
                                <a class="btn btn-primary" ui-sref="settings.admin-team-owner">Add student</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4" ng-show="vm.isTeamLead">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h4>Activity <span class="badge badge-success pull-right">4</span></h4>
                            </div>
                            <div class="panel-body">
                                <div class="alert alert-success">4 members updated their protocols</div>
                                <div class="row">
                                    <div class="col-sm-2 col-xs-4">
                                        <img ng-src="modules/users/client/img/profile/default.png" class="header-profile-image" src="modules/users/client/img/profile/default.png">
                                    </div>
                                    <div class="col-sm-10 col-xs-8">
                                        <p>John Doe <small class="text-muted">15 min ago</small><br />
                                        <span class="text-muted">submitted</span> <a href="#">Protocol 1</a></p>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-2 col-xs-4">
                                        <img ng-src="modules/users/client/img/profile/default.png" class="header-profile-image" src="modules/users/client/img/profile/default.png">
                                    </div>
                                    <div class="col-sm-10 col-xs-8">
                                        <p>Kay Martin <small class="text-muted">2 hours ago</small><br />
                                        <span class="text-muted">resubmitted</span> <a href="#">Protocol 1 & 3</a></p>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-2 col-xs-4">
                                        <img ng-src="modules/users/client/img/profile/default.png" class="header-profile-image" src="modules/users/client/img/profile/default.png">
                                    </div>
                                    <div class="col-sm-10 col-xs-8">
                                        <p>Daryl Jones <small class="text-muted">3 hours ago</small><br />
                                        <span class="text-muted">submitted</span> <a href="#">Protocol 4</a></p>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-sm-2 col-xs-4">
                                        <img ng-src="modules/users/client/img/profile/default.png" class="header-profile-image" src="modules/users/client/img/profile/default.png">
                                    </div>
                                    <div class="col-sm-10 col-xs-8">
                                        <p>Mary Ann Smith <small class="text-muted">1 day ago</small><br />
                                        <span class="text-muted">submitted</span> <a href="#">Protocol 2</a></p>
                                    </div>
                                </div>
                            </div>
                            <div class="panel-footer">
                                <a class="btn btn-primary" ui-sref="expeditions.submitted">View Submissions</a>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4" ng-show="vm.isTeamLead">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <h4>Documents</h4>
                            </div>
                            <div class="panel-body">
                                <p><a href="https://drive.google.com/folderview?id=0Bzf_STNcTtRmeDZYXzhiOTlqQXM&usp=sharing&tid=0Bzf_STNcTtRmaFktbXJWYmVqMW8" target="_blank"><i class="glyphicon glyphicon-folder-open pull-left"></i>&nbsp;&nbsp;Data Sheets</a></p>
                                <p><a href="https://drive.google.com/folderview?id=0Bzf_STNcTtRmRlNLTUFTbG5pWGs&usp=sharing&tid=0Bzf_STNcTtRmaFktbXJWYmVqMW8" target="_blank"><i class="glyphicon glyphicon-folder-open"></i>&nbsp;&nbsp;Manuals</a></p>
                                <p><a href="https://drive.google.com/folderview?id=0Bzf_STNcTtRmbG1pMVpUM1lGUmM&usp=sharing&tid=0Bzf_STNcTtRmaFktbXJWYmVqMW8" target="_blank"><i class="glyphicon glyphicon-folder-open"></i>&nbsp;&nbsp;Resources & Curriculum</a></p>
                                <p><a href="https://drive.google.com/folderview?id=0BwOkf1kzdWyncFR4SFRHMkJMZkU&usp=sharing&tid=0Bzf_STNcTtRmaFktbXJWYmVqMW8" target="_blank"><i class="glyphicon glyphicon-folder-open"></i>&nbsp;&nbsp;Species ID</a></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="panel panel-default" ng-show="vm.isTeamLead">
                    <div class="panel-heading">
                        <h4>Team ORS</h4>
                    </div>
                    <div class="panel-body">
                        <table class="table table-hover">
                            <tr data-toggle="modal" data-target="#modal-station-register" ng-repeat="station in vm.stations">
                                <td><h3>
                                  <i class="glyphicon glyphicon-map-marker green" ng-show="station.status === 'Active'"></i>
                                  <i class="glyphicon glyphicon-map-marker red" ng-show="station.status === 'Lost'"></i>
                                </h3></td>
                                <td>{{station.name}}<br/><span class="small text-muted">{{station.latitude}}, {{station.longitude}}<br />
                                  {{station.bodyOfWater}}</span>
                                </td>
                                <td class="text-right">
                                  <span class="label label-success" ng-show="station.status === 'Active'">Active</span>
                                  <span class="label label-default" ng-show="station.status === 'Lost'">Lost</span>
                                </td>
                              </tr>
                        </table>
                    </div>
                    <div class="panel-footer">
                        <a class="btn btn-primary" data-toggle="modal" data-target="#modal-station-register">Register a station</a>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h4>Team Expeditions</h4>
                    </div>
                    <div class="panel-body">
                        <table class="table table-hover">
                            <tr class="text-muted" ng-repeat="expedition in vm.expeditions"
                             ui-sref="expeditions.protocols({ expeditionId: expedition._id })">
                                <td ng-show="vm.isUpcoming(expedition)"><i class="glyphicon glyphicon-unchecked"></i></td>
                                <td ng-show="expedition.status === 'incomplete' || expedition.status === 'pending' ||
                                  expedition.status === 'returned'"><i class="glyphicon glyphicon-unchecked red"></i></td>
                                <td ng-show="expedition.status === 'published'"><i class="glyphicon glyphicon-check green"></i></td>
                                <td><b>{{expedition.name}}</b><br/><p class="text-muted">{{vm.getExpeditionDate(expedition)}}</br>
                                  {{vm.getExpeditionTimeRange(expedition)}}</p></td>
                                <td class="text-right" ng-show="vm.isUpcoming(expedition)"><span class="label label-default">Coming up</span></td>
                                <td class="text-right" ng-show="expedition.status === 'incomplete' || expedition.status === 'pending' ||
                                  expedition.status === 'returned'"><span class="label label-danger">Incomplete</span></td>
                                <td class="text-right" ng-show="expedition.status === 'published'"><span class="label label-success">Published</span></td>
                            </tr>
                        </table>
                    </div>
                    <div class="panel-footer">
                        <a class="btn btn-default" ui-sref="expeditions.list">See all</a>
                        <a class="btn btn-primary" ui-sref="expeditions.create" ng-show="vm.isTeamLead">Create an expedition</a>
                    </div>
                </div>
            </div>
        </div>
    </section>
</section>






  <!-- MODALS -->
  <div class="modal fade" id="modal-station-register" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
          <h4 class="modal-title">Register a Station</h4>
          <!--TODO: If editing an existing station: show:
          <h4 class="modal-title">Update the <span class="red">{{station.title}}</span> Station</h4> and wire up title-->
        </div>
        <div class="modal-body">
          <div class="row">
            <div class="col-sm-12">
                <div class="row">
                    <div class="form-group col-sm-6">
                        <label>Station Name</label>
                        <input type="text" class="form-control" />
                    </div>
                    <div class="form-group col-sm-6">
                        <label>Team</label>
                        <select class="form-control"><!--TODO: Fill in all teacher's teams here, preselect whichever team they clicked Register from--></select>
                    </div>
                </div>
                <div class="row">
                    <div class="form-group col-sm-6">
                        <label>Body of Water</label>
                        <input type="text" class="form-control" />
                    </div>
                    <div class="form-group col-sm-6">
                        <label>Station Status</label>
                        <select class="form-control">
                            <option>Active</option>
                            <option>Lost</option>
                        </select>
                    </div>
                </div>
                <google-geocode ng-if="vm.canGeocode" place-selected="vm.placeSelected"></google-geocode>
                <leaflet-map map-controls="vm.mapControls" map-click-event="vm.mapClick" marker-drag-end-event="vm.markerDragEnd" can-move-marker="vm.canMoveMarker" show-marker="vm.showMarker"></leaflet-map><!-- TODO: Fix? I copied this from the protocol, not sure if it'll work? -->
                <br />
                <div class="row">
                    <div class="form-group col-sm-6">
                        <label>Latitude</label>
                        <input type="text" class="form-control" placeholder="39.290385" ng-model="vm.latitude"/>
                    </div>
                    <div class="form-group col-sm-6">
                        <label>Longitude</label>
                        <input type="text" class="form-control" placeholder="-76.612189" ng-model="vm.longitude"/>
                    </div>
                </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-dismiss="modal">Delete</button><!-- Only show on Edit view -->
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" data-dismiss="modal">Register</button><!-- Say "Update" on Edit view -->
        </div>
      </div>
    </div>
  </div>
  <!--END MODALS-->
