<div class="row" isotope-container="isotope-container">
    <div ng-repeat="lesson in vm.submittedLessons" isotope-item="isotope-item" class="col-sm-6 col-md-4 col-lg-3 library-item">
        <div class="panel" data-category="transition">
            <div class="panel-heading" style="background: {{lesson.unit.color}}">
                <span class="pull-right">{{lesson.lessonOverview.grade}}</span>
                <h3 class="panel-title">
                    <i class="glyphicon {{lesson.unit.icon}}"></i>
                    {{lesson.unit.title}}
                </h3>
            </div>
            <div class="panel-body">
                <small>{{lesson.lessonOverview.setting}}</small>
                <h4>{{lesson.title}}</h4>
                <p ng-bind-html="lesson.lessonOverview.lessonSummary | sanitize"></p>
            </div>
            <div class="panel-footer">
                <a class="btn btn-sm btn-primary pull-right" ui-sref="lessons.edit({ lessonId: lesson._id })"><i class="glyphicon glyphicon-pencil"></i></a>
                <a class="btn btn-sm btn-danger pull-right" ng-click="vm.openReturnModal(lesson)"><i class="glyphicon glyphicon-remove"></i></a>
                <a class="btn btn-sm btn-success pull-right" ng-click="vm.openPublishModal(lesson)"><i class="glyphicon glyphicon-ok"></i></a>
                <h6 class="blue">Awaiting Approval</h6>
            </div>
        </div>
    </div>
</div>

<!-- Modals -->
<return-lesson lesson="vm.lesson" save-function="vm.returnModal" cancel-function="vm.closeReturnModal"></return-lesson>
<publish-lesson lesson="vm.lesson" save-function="vm.publishModal" cancel-function="vm.closePublishModal"></publish-lesson>
