<div class="row" isotope-container="isotope-container-submitted" id="isotope-container-submitted" ng-cloak="" >
    <div ng-repeat="submitted in sub.submittedLessons track by submitted._id" isotope-item="isotope-item-submitted"
    class="col-sm-6 col-md-4 col-lg-3 library-item">
        <div class="panel-overlay">
            <a class="btn btn-sm btn-primary pull-right" ui-sref="lessons.edit({ lessonId: submitted._id })">
                <i class="glyphicon glyphicon-pencil"></i></a>
            <a class="btn btn-sm btn-danger pull-right" ng-click="sub.openReturnModal(submitted)">
                <i class="glyphicon glyphicon-remove"></i></a>
            <a class="btn btn-sm btn-success pull-right" ng-click="sub.openPublishModal(submitted)">
                <i class="glyphicon glyphicon-ok"></i></a>
        </div>
        <div class="panel" ui-sref="lessons.view({ lessonId: submitted._id })">
            <div class="panel-heading" style="background: {{submitted.unit.color}}">
                <span class="pull-right">{{submitted.lessonOverview.grade}}</span>
                <h3 class="panel-title">
                    <i class="{{submitted.unit.icon}}"></i>
                    {{submitted.unit.title}}
                </h3>
            </div>
            <div class="panel-body">
                <small>{{submitted.lessonOverview.setting}}</small>
                <h4>{{submitted.title}}</h4>
                <p ng-bind="submitted.lessonOverview.lessonSummary | limitTo:200"></p>
                <img ng-show="submitted.featuredImage" ng-src="{{submitted.featuredImage.path}}" class="img-responsive" />
            </div>
            <div class="panel-footer">
                <ul class="list-inline">
                  <li ng-repeat="subject in submitted.lessonOverview.subjectAreas">
                      <span ng-style="{'background-color':'{{subject.color}}'}" ng-bind="subject.subject"
                      class="label label-default"></span>
                  </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- Modals -->
<return-lesson lesson="sub.lesson" save-function="sub.returnModal" cancel-function="sub.closeReturnModal"></return-lesson>
<publish-lesson lesson="sub.lesson" save-function="sub.publishModal" cancel-function="sub.closePublishModal"></publish-lesson>
