<div class="jumbotron text-center">
    <section class="content">
        <section class="container-fluid">
          <h2>Events</h2>
        </section>
    </section>
</div>
<section class="content">
    <section class="container-fluid">
        <nav class="navbar">
            <a class="btn btn-default pull-right" ui-sref="events.create" view-permissions="admin">
              <i class="glyphicon glyphicon-plus"></i> Create an event</a>
        </nav>
        <div class="row" isotope-container="isotope-container" id="lesson-list-isotope-container">
            <div isotope-item="isotope-item" ng-repeat="calendarEvent in vm.events" class="col-xs-12 col-sm-6 col-md-4 col-lg-3 library-item">
                <div class="panel" data-category="transition" ui-sref="events.view({ eventId: calendarEvent._id })">
                    <div class="panel-body text-center">
                        <h3 class="blue" ng-repeat="date in calendarEvent.dates">{{vm.getEventDate(date.startDateTime)}} <small>
                          {{vm.getEventYear(date.startDateTime)}}<br/>
                          {{vm.getEventTimeRange(date.startDateTime, date.endDateTime)}}</small></h3>
                        <h4><b class="red" ng-bind="calendarEvent.title"></b></h4>
                        <p ng-show="calendarEvent.location.addressString"><i class="fa fa-map-marker"></i> {{calendarEvent.location.addressString}}</p>
                    </div>
                    <div class="panel-footer">
                        <p class="text-muted text-center">
                            <span ng-show="vm.getOpenSpots(calendarEvent.registrants, calendarEvent.maximumCapacity) > 0" id="openSpots">
                              <i class="fa fa-calendar-times-o"></i>
                              <b>{{vm.getOpenSpots(calendarEvent.registrants, calendarEvent.maximumCapacity)}} spots</b> and<br/></span>
                            <span ng-show="(vm.getOpenSpots(calendarEvent.registrants, calendarEvent.maximumCapacity) <= 0 &&
                            vm.getOpenSpots(calendarEvent.registrants, calendarEvent.maximumCapacity) !== null)" id="noOpenSpots">
                              <i class="fa fa-calendar-times-o"></i>
                              <b>Event is full</b><br/></span>
                            <span ng-show="(vm.getDaysRemainingDeadline(calendarEvent.dates, calendarEvent.deadlineToRegister) < 0 ||
                              (vm.getOpenSpots(calendarEvent.registrants, calendarEvent.maximumCapacity) <= 0 &&
                              vm.getOpenSpots(calendarEvent.registrants, calendarEvent.maximumCapacity) !== null))" id="registrationClosed">
                              <i class="fa fa-clock-o"></i>
                              <b>Registration is closed</b></span>
                            <span ng-show="vm.getDaysRemainingDeadline(calendarEvent.dates, calendarEvent.deadlineToRegister) === 0 &&
                              (vm.getOpenSpots(calendarEvent.registrants, calendarEvent.maximumCapacity) > 0 ||
                              vm.getOpenSpots(calendarEvent.registrants, calendarEvent.maximumCapacity) === null)" id="registerToday">
                              <i class="fa fa-clock-o"></i>
                              <b>Last day to register!</b></span>
                            <span ng-show="vm.getDaysRemainingDeadline(calendarEvent.dates, calendarEvent.deadlineToRegister) > 0 &&
                              (vm.getOpenSpots(calendarEvent.registrants, calendarEvent.maximumCapacity) > 0 ||
                              vm.getOpenSpots(calendarEvent.registrants, calendarEvent.maximumCapacity) === null)" id="registrationOpen">
                              <i class="fa fa-clock-o"></i>
                              <b>{{vm.getDaysRemainingDeadline(calendarEvent.dates, calendarEvent.deadlineToRegister)}} days</b> left to register</span>
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <div class="alert" ng-if="vm.events.$resolved && !vm.events && vm.events.length === 0" view-permissions="admin">
            No events yet, why don't you <a ui-sref="events.create">create one</a>?
        </div>
    </section>
</section>
