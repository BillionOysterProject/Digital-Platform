<section class="content shaded">
    <section class="container">
        <div class="page-header">
            <h1>{{vm.event._id ? 'Edit event' : 'Create new event'}}</h1>
        </div>
        <!-- TIFF: Form needs wired up - not sure what is required and what isn't -->
        <form name="vm.form.eventForm" ng-submit="vm.save(vm.form.eventForm.$valid)" novalidate>
            <fieldset>
                <div class="panel panel-default">
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="form-group" show-errors>
                                    <label class="control-label" for="name">Title *</label>
                                    <input name="name" type="text" ng-model="vm.event.name" id="name" class="form-control" placeholder="Name" required />
                                    <div ng-messages="vm.form.eventForm.name.$error" role="alert">
                                        <p class="help-block error-text" ng-message="required">Event name is required.</p>
                                    </div>
                                </div>
                                <div class="form-group" show-errors>
                                    <label class="control-label">Location *</label>
                                    <input type="text" class="form-control" required />
                                    <div role="alert">
                                        <p class="help-block error-text" ng-message="required">Location is required.</p>
                                    </div>
                                </div>
                                <div class="form-group" show-errors>
                                    <label class="control-label">Cost *</label>
                                    <textarea class="form-control"></textarea>
                                    <div role="alert">
                                        <p class="help-block error-text" ng-message="required">Cost is required.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-group" show-errors>
                                            <label class="control-label">Date *</label>
                                            <input type="date" class="form-control" required />
                                            <div role="alert">
                                                <p class="help-block error-text" ng-message="required">Date is required.</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 col-sm-6">
                                        <div class="form-group" show-errors>
                                            <label class="control-label">Start Time *</label>
                                            <input type="time" class="form-control" required />
                                            <div role="alert">
                                                <p class="help-block error-text" ng-message="required">Start time is required.</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 col-sm-6">
                                        <div class="form-group" show-errors>
                                            <label class="control-label">End Time *</label>
                                            <input type="time" class="form-control" required />
                                            <div role="alert">
                                                <p class="help-block error-text" ng-message="required">End time is required.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="form-group">
                                            <!--TIFF: This button should add an additional row above, duplicate of the date/time row above. No more than 1 date/time set is required-->
                                            <a class="btn btn-default btn-block">Add additional date</a>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group" show-errors>
                                            <label class="control-label">Maximum Capacity</label>
                                            <input type="number" class="form-control" />
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <!--TIFF: Should be default as the date of the event as soon as they fill out that field, they can change to an earlier date (but not a later date) if they want -->
                                        <div class="form-group" show-errors>
                                            <label class="control-label">Deadline to register</label>
                                            <input type="date" class="form-control" />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-group" show-errors>
                                    <label class="control-label">Description *</label>
                                    <textarea class="form-control"></textarea>
                                    <div role="alert">
                                        <p class="help-block error-text" ng-message="required">Description is required.</p>
                                    </div>
                                </div>
                                <div class="form-group" show-errors>
                                    <label class="control-label">Skills taught</label>
                                    <textarea class="form-control"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-body">
                        <div class="row">
                            <!--TIFF: stole these two fields from the Lesson Form -- need adjusting -->
                            <div class="col-md-6">
                                <div class="form-group" show-errors>
                                    <label for="image" class="control-label">Featured Image</label>
                                    <single-image-drop-zone uploader="vm.featuredImageUploader" image-url="vm.featuredImageURL"
                                    image-alt="Featured Image" id="lesson-featured-image"></single-image-drop-zone>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-group">
                                    <label for="vocabulary" class="control-label">Resources</label>
                                    <a class="btn btn-default btn-block" data-toggle="modal" data-target="#modal-resources">Add resource</a>
                                </div>
                                <table class="table">
                                  <tr ng-repeat="link in vm.resourceLinks">
                                    <td><i class="glyphicon glyphicon-link text-muted"></i> {{link.name}}</td>
                                    <td>{{link.link}}</td>
                                    <td>
                                      <a ng-click="vm.deleteTeacherResourceLink($index)"><i class="glyphicon glyphicon-remove"></i></a>
                                    </td>
                                  </tr>
                                  <tr ng-repeat="file in vm.resourceFiles">
                                    <td><i class="glyphicon glyphicon-file text-muted"></i> {{file.originalname}}</td>
                                    <td></td>
                                    <td id="lesson-teach-resource-files">
                                        <a ng-click="vm.deleteTeacherResourceFile($index, file)"><i class="glyphicon glyphicon-remove"></i>
                                    </td>
                                  </tr>
                                </table>
                            </div>
                        </div>   
                    </div>
                </div>
                <!-- TIFF: needs wired up, copied from lesson form 
                <div class="alert alert-danger">
                    <h4>Sorry, you can't submit just yet!</h4>
                    <ul class="list-unstyled" ng-repeat="(key, errors) in vm.form.lessonForm.$error track by $index">
                        <li ng-repeat="e in errors"><i class="glyphicon glyphicon-remove-sign"></i> <b>{{ e.$name }}</b> is {{ key }}</li>
                    </ul>
                    <ul class="list-unstyled">
                        <li ng-repeat="e in vm.error"><i class="glyphicon glyphicon-remove-sign"></i> {{ e }}</li>
                    </ul>
                </div>
                -->
                <button type="submit" class="btn btn-default">{{vm.event._id ? 'Update' : 'Create'}}</button>
                <button type="button" class="btn btn-danger pull-right" ng-show="vm.event._id" ng-click="vm.openDeleteEvent()">Delete</button>
            </fieldset>
        </form>
    </section>
    
    
    
    <!--MODALS -->
    <!--TIFF: Need delete event modal (copy from lesson form) -->
    <!--TIFF: Resources modal copied from lesson form - adjust as needed -->
    <div class="modal fade" id="modal-resources" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
              <h4 class="modal-title">Add a teacher resource</h4>
            </div>
            <div class="modal-body">
              <div class="row">
                <div class="col-sm-12">
                  <ul class="nav nav-tabs" role="tablist">
                    <li role="presentation" class="active">
                      <a href="#link" data-toggle="tab" aria-controls="link" role="tab">Link</a>
                    </li>
                    <li role="presentation">
                      <a href="#upload" data-toggle="tab" aria-controls="upload" role="tab">Upload</a>
                    </li>
                  </ul>
                  <div class="tab-content">
                    <div role="tabpanel" class="tab-pane active" id="link">
                      <br/>
                      <div class="form-group">
                        <label>Name</label>
                        <input type="text" class="form-control" ng-model="vm.tempResourceLinkName"/>
                      </div>
                      <div class="form-group">
                        <label>URL to video (hosted on Youtube, Vimeo, etc) or website</label>
                        <input type="text" class="form-control" ng-model="vm.tempResourceLink"/>
                      </div>
                    </div>
                    <div role="tabpanel" class="tab-pane" id="upload">
                      <br/>
                      <multiple-file-drop-zone uploader="vm.teacherResourceFilesUploader" files="vm.tempResourceFiles"></multiple-file-drop-zone>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="vm.cancelTeacherResources()">Cancel</button>
              <!-- <button type="button" class="btn btn-danger" data-dismiss="modal" ng-click="vm.deleteTeacherResources()">Delete</button> -->
              <button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="vm.addTeacherResources()">Add</button>
            </div>
          </div>
        </div>
    </div>
</section>
